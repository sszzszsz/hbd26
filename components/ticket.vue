<template>
  <div class="m-ticket">
    <nuxt-link v-if="linkFrag == true" :to="`/ticket/${index}/`" class="m-ticket__inr">
      <img :src="renderImg(`bg_ticket_${id}.svg`)" class="m-ticket__bg" />
      <dl class="m-ticket__box">
        <dt class="m-ticket__num">
          <span class="m-ticket__numTxt">TICKET {{ num }}</span>
        </dt>
        <dd class="m-ticket__dtl">
          <p class="m-ticket__ttl">{{ ttl }}</p>
          <p class="m-ticket__date">DeadLine : 2020/12/31</p>
        </dd>
      </dl>
      <div class="m-ticket__limit">
        <span class="m-ticket__limitTxt">ONLY ONCE</span>
      </div>
    </nuxt-link>

    <div v-else class="m-ticket__inr">
      <img :src="renderImg(`bg_ticket_${id}.svg`)" class="m-ticket__bg" />
      <dl class="m-ticket__box">
        <dt class="m-ticket__num">
          <span class="m-ticket__numTxt">TICKET {{ num }}</span>
        </dt>
        <dd class="m-ticket__dtl">
          <p class="m-ticket__ttl">{{ ttl }}</p>
          <p class="m-ticket__date">DeadLine : 2020/12/31</p>
        </dd>
      </dl>
      <div class="m-ticket__limit">
        <span class="m-ticket__limitTxt">ONLY ONCE</span>
      </div>
    </div>

    <div class="m-ticket--used">
      <p>USED</p>
    </div>
  </div>
</template>
<script>
import Vue from 'vue'

export default Vue.extend({
  props: {
    id: {
      type: String, // StringÂûã„Å´ÈôêÂÆö
      required: true, // ÂøÖÈ†àÈ†ÖÁõÆ
    },
    index: {
      type: Number,
      required: true,
    },
    linkFrag: {
      type: Boolean,
      required: true,
    },
    ttl: {
      type: String,
      required: true,
    },
    num: {
      type: String,
      required: true,
    },
  },
  data() {
    return {
      isDmy: false,
    }
  },
  created() {},
  mounted() {
    this.init()
  },
  methods: {
    init() {
      console.log('üê£ ticket')
    },
    renderImg(file) {
      return require('@/assets/img/ticket/' + file)
    },
  },
})
</script>
<style lang="scss">
.m {
  &-ticket {
    position: relative;
    background: #e4e2d9;
    background-image: url('~@/assets/img/paper_ticket_outer.png');
    border: 1px solid $brown_dark2;
    border-right: none;
    width: calc(100% - 7px);
    height: spvw(96px);
    min-height: 96px;
    display: flex;
    box-shadow: 1px 2px 3px #6c655d6e;
    z-index: 50;

    &:after {
      display: block;
      content: '';
      width: 17px;
      height: calc(100% + 2px);
      background-image: url('~@/assets/img/bg_ticket_edge.svg');
      background-repeat: repeat-y;
      background-size: 15px 19px;
      background-position: top right;
      position: absolute;
      top: -1px;
      right: -14px;
    }

    &--used {
      display: none;
    }

    &__bg {
      position: absolute;
      bottom: 0;
      right: 0%;
      z-index: 51;
      opacity: 0.7;
      height: 100%;
      width: auto;
    }

    &__inr {
      display: flex;
      justify-content: space-between;
      background: #fdfcf8;
      background-image: url('~@/assets/img/paper_ticket_inr.png');
      border: 1px solid $brown_dark2;
      width: calc(100% - 16px);
      margin: spvw(8px) auto;
      color: $brown_dark2;
      text-decoration: none;
      position: relative;
      z-index: 52;

      &:before {
        display: block;
        content: '';
        width: 14px;
        height: 11px;
        background-image: url('~@/assets/img/bg_frame_corner_tl.svg');
        background-repeat: no-repeat;
        background-size: contain;
        position: absolute;
        top: -4px;
        left: -7px;
      }
      &:after {
        display: block;
        content: '';
        width: 14px;
        height: 11px;
        background-image: url('~@/assets/img/bg_frame_corner_tr.svg');
        background-repeat: no-repeat;
        background-size: contain;
        position: absolute;
        top: -4px;
        right: -6px;
      }
    }
    &__box {
      padding: spvw(5px) spvw(8px) spvw(5px) spvw(12px);
      width: 88%;

      &:before {
        display: block;
        content: '';
        width: 14px;
        height: 11px;
        background-image: url('~@/assets/img/bg_frame_corner_bl.svg');
        background-repeat: no-repeat;
        background-size: contain;
        position: absolute;
        bottom: -3px;
        left: -7px;
      }
      &:after {
        display: block;
        content: '';
        width: 14px;
        height: 11px;
        background-image: url('~@/assets/img/bg_frame_corner_br.svg');
        background-repeat: no-repeat;
        background-size: contain;
        position: absolute;
        bottom: -3px;
        right: -6px;
      }
    }
    &__num {
      position: relative;
      font-size: spfz(10px);
      @include josefin-m();
      display: flex;
      align-items: center;
      &:before,
      &:after {
        content: '';
        display: inline-block;
        height: 1px;
        width: spvw(20px);
        background: $brown_dark2;
      }
      &:before {
        left: 0;
        flex-shrink: 0;
      }
      &:after {
        width: spvw(50px);
      }
    }
    &__numTxt {
      padding: 0 1em;
      flex-shrink: 0;
    }
    &__ttl {
      padding: 0.3em 0 1em;
      @include notosans-b();
      font-size: spfz(14px);
    }
    &__date {
      @include josefin-r();
      font-size: spfz(12px);
      // text-align: right;
      position: absolute;
      bottom: 0.5em;
      left: 1em;
    }
    &__limit {
      width: 12%;
      position: relative;
      padding: spvw(5px) spvw(12px);
      background-image: url('~@/assets/img/line_dot.svg');
      background-repeat: no-repeat;
      background-size: contain;
    }
    &__limitTxt {
      display: block;
      @include josefin-b-i();
      font-size: spfz(10px);
      transform: rotate(-90deg);
      position: absolute;
      top: 40%;
      left: -38%;
      white-space: nowrap;
    }
  }
}

.is-used .m-ticket {
  &--used {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    background: #6c655db0;
    border: 1px solid $brown_dark2;
    border-right: none;
    position: absolute;
    top: 0;
    z-index: 53;
    &:after {
      display: block;
      content: '';
      width: 17px;
      height: calc(100% + 2px);
      background-image: url('~@/assets/img/bg_ticket_used_edge.svg');
      background-repeat: repeat-y;
      background-size: 15px 19px;
      background-position: top right;
      position: absolute;
      top: -1px;
      right: -15px;
    }

    p {
      @include josefin-b();
      color: #e4e2d9;
      opacity: 0.8;
      font-size: spfz(40px);
    }
  }
}
</style>
